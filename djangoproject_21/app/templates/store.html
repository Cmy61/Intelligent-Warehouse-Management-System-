{%extends "home.html"%}
{%block store %}active{% endblock %}
{% load static %}
{% block mainbody %}
<!-- <!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/store.css' %}"/>
	<script src="{% static 'js/store.js'%}"></script>
	<link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.staticfile.org/jquery/3.4.0/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body> -->
	<script>
		$(function(){
				$('#batchImport').change(function(){
				// 使用Ajax实现文件上传操作
				// 创建一个FormData对象，用于存放上传文件的数据
				var form_data = new FormData();
				// 读取上传文件的数据
				var file_info = $("#batchImport")[0].files[0];
				// 将读取到的二进制数据添加到formData对象中
				form_data.append("file", file_info);
				console.log("准备上传...")
				// 使用Ajax发送异步请求并携带请求数据
				$.ajax({
					async: true,
					data: form_data,
					url: "/app/importStore/import/",
					type: "post",
					headers: {"X-CSRFToken":$.cookie("csrftoken")},
					processData: false, //不序列化data
					contentType: false, //不设置发送数据流的类型
					success: function(data){
						if(data == "True"){
							alert("文件上传成功");
						}
						else{
							alert("文件上传失败");
						}
					}
				});
			});
		});
	</script>

	<div class="backgroundStore">
		<!--标题栏-->
		<div class="titleStore">仓库</div>
		<div class="contentStore">
			<!--按钮区-->
			<div class="buttondivStore">
				<input type="image" src="{%static 'Image/Search.png'%}" title="搜索" class="addButtonStore" id="findStore" value="查找" onclick="javascript:inquiry()"/> 
				<input type="image" src="{%static 'Image/add.png'%}" title="添加" class="addButtonStore" id="addStore"  value="新增" onclick="javascript:add()"/>
				<input type="image" src="{%static 'Image/download.png'%}" title="导出文件" class="addButtonStore"  value="导出文件" onclick="location.href='/app/exportStore/export/'"/>
				<input type="file" id="batchImport" title="导入文件" value="导入文件" accept=".xlsx,.xls"/>
				<img src="{%static 'Image/upload.png'%}" title="上传文件" class="addButtonStore"></img>
			</div>
			<!--表格展示区-->
			<div class="TableStore">
				<table id="tablelist" class="tablelist" style="width:100%;" cellpadding="0";cellspacing="0">
					<tr class="StoreTr">
						<td style="text-align:center; border-top-left-radius: 25px;">仓库id</td>
						<td style="text-align:center;">仓库名称</td>
						<td style="text-align:center;">仓库类型</td>
						<td style="text-align:center;">仓库所在地</td>
						<td style="text-align:center;">仓库容量</td>
						<!-- <td style="text-align:center;">已使用容量</td> -->
						<td style=" text-align:center; border-top-right-radius: 25px;">操作</td>
					</tr>
					{% for store in lstStore %}       
					<tr class="StoreTr2">
						<td style="text-align:center; background-color:white; ">
							<label style="font-weight:bold;">{{ store.storeId }}</label>
						</td>
						<td style="text-align:center; background-color:white;">{{ store.storeName }}</td>
						<td style="text-align:center; background-color:white;">{{ store.storeType }}</td>
						<td style="text-align:center; background-color:white;">{{ store.storeLoca }}</td>
						<td style="text-align:center; background-color:white;">{{ store.storeCap }}</td>
						<!-- <td style="text-align:center; background-color:white;">{{ store.storeExist }}</td> -->
						<td style="text-align:center; background-color:white; ">
							<input type="image" src="{%static 'Image/edit.png'%}"  title="编辑" id="btnUpdate" class="btnsubmit" style="background-color:white;color:black;" onclick="javascript:updateAjax({{store.storeId}})" value="更新"/>
							<input type="image" src="{%static 'Image/delete.png'%}"  title="删除" id="btnDelete" class="btnsubmit" style="background-color:white;color:black" onclick="javascript:deleteDeptById({{ store.storeId }});" value="删除"/>
						</td>
					</tr>
					{% empty %}
					<tr>
						<td colspan="6" style="text-align:center; background-color:white; height:25px;">
								<label class="tooltip" style="color:black" >暂无数据</label>
						</td>
					</tr>
					{% endfor %}
				</table>
			</div>
		</div>
	</div>
	

	<!-- 更新模态框 -->
	<div id="updateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>更新仓库信息</h2>
                <span id="updatecloseBtn" class="closeStore">×</span>
            </div>
            <div class="modal-body">
                <form id="updateDeptFrom" name="updateDeptFrom" method="post" action="/app/updateStore/update/">
					{% csrf_token %}
					<p>
						<label class="input_font">仓库编号：</label>
						<input type="text" id="updatestoreId1" name="updatestoreOther"  disabled="true"/>
						<input type="hidden" id="updatestoreId2" name="updatestoreId"  />
					</p>
					<p>
						<label class="input_font">仓库名称：</label>
						<input type="text" id="updatestoreName" name="updatestoreName" value="{{ store.storeName }}" placeholder="输入仓库名称" required/>
						
					</p>
					<p>
						<label class="input_font">仓库类型：</label>
						<select class="dropdown" id="updatestoreType" name="updatestoreType">
                            <!-- <option value="">无</option> -->
							<option value="大仓库">大仓库</option>
							<option value="中仓库">中仓库</option>
							<option value="小仓库">小仓库</option>
						</select>
					</p>
					<p>
						<label class="input_font">仓库所在地：</label>
						<select class="dropdown" id="updatestoreLoca" name="updatestoreLoca">
                            <!-- <option value="">无</option> -->
							<option value="北京">北京</option>
							<option value="上海">上海</option>
							<option value="广州">广州</option>
							<option value="重庆">重庆</option>
							<option value="四川">四川</option>
							<option value="浙江">浙江</option>
							<option value="陕西">陕西</option>
						</select>
					</p>
					<p>
						<label class="input_font">仓库容量：</label>
						<input type="text" id="updatestoreCap" name="updatestoreCap" value="{{ store.storeCap }}" placeholder="输入仓库容量（吨）" required/>
					</p>
					<!-- <p>
						<label class="input_font">已使用容量：</label>
						<input type="text" id="updatestoreExist" name="updatestoreExist" value="{{ store.storeExist }}" placeholder="输入仓库已使用容量（吨）" required/>
					</p> -->
					<p>
						<button class="btnsubmit">更新</button>
					</p>
				</form>
            </div>
        </div>
    </div>  

	

	<!--添加仓库界面-->
	<div id="myModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>新增仓库</h2>
                <span id="closeBtn" class="closeStore">×</span>
            </div>
            <div class="modal-body">
                <form id="addDeptFrom" name="addDeptFrom" method="post" action="/app/addStore/add/">
					{% csrf_token %}

					<p>
						<label class="input_font">仓库名称：</label>
						<input type="text" id="addstoreName" name="storeName"  placeholder="输入仓库名称" required/>
					</p>
					<p>
						<label class="input_font">仓库类型：</label>
						<select class="dropdown" id="addstoreType" name="storeType"  required="required">
							<option value="大仓库">大仓库</option>
							<option value="中仓库">中仓库</option>
							<option value="小仓库">小仓库</option>
						</select>
					</p>
					<p>
						<label class="input_font">仓库所在地：</label>
						<select class="dropdown" id="addstoreLoca" name="storeLoca" required="required">
							<option value="北京">北京</option>
							<option value="上海">上海</option>
							<option value="广州">广州</option>
							<option value="重庆">重庆</option>
							<option value="四川">四川</option>
							<option value="浙江">浙江</option>
							<option value="陕西">陕西</option>
						</select>
					</p>
					<p>
						<label class="input_font">仓库容量：</label>
						<input type="text" id="addstoreCap" name="storeCap"  placeholder="输入仓库容量（吨）" required/>
					</p>
					<!-- <p>
						<label class="input_font">已使用容量：</label>
						<input type="text" id="addstoreExist" name="storeExist" placeholder="输入仓库已使用容量（吨）" required/>
					</p> -->
					<p>
						<button class="btnsubmit">添加新仓库</button>
					</p>
				</form>
				
            </div>
        </div>
    </div>

	

	<!-- 查询仓库界面 -->
	<div id="inquiryModal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>查询仓库</h2>
				<span id="inquirycloseBtn" class="closeStore">×</span>
			</div>
			<div class="modal-body">
				<form id="inquiryFrom" name="inquiryFrom" method="post" action="/app/searchStore/search/">
					{% csrf_token %}
					<p>
						<label class="input_font">仓库名称：</label>
						<input type="text" id="inquirystoreName" name="inquirystoreName" placeholder="输入仓库名称"/>
					</p>
                    <p>
						<label class="input_font">仓库类型：</label>
						<input type="text" id="inquirystoreType" name="inquirystoreType" placeholder="输入仓库类型"/>
					</p>
                    <p>
						<label class="input_font">仓库所在地：</label>
						<input type="text" id="inquirystoreLoca" name="inquirystoreLoca" placeholder="输入仓库所在地"/>
					</p>
					<p>
						<button class="btnsubmit">查询仓库</button>
					</p>
				</form>
			</div>
		</div>
	</div>
{%endblock%}

<!-- </body>
</html> -->
