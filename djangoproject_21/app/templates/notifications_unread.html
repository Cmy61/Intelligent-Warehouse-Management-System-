{%extends "home.html"%}
{%block notifications_unread %}active{% endblock %}
{% block mainbody %}
 
<!-- 引入notifications的模板标签 -->
{% load notifications_tags %}
{% notifications_unread as unread_count %}
 
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>


<!--显示未读通知-->
<br>
<div class="titleStore" style="height: 5%;">未读通知</div>
<div style=" margin-left:30px;height: 93%; overflow: auto;">
    {% for notice in unread_list %}<!--遍历后端返回的未读通知列表-->
    <table width="100%" height=6%;table-layout: fixed;>
        <tr>
            <td style="width: 5%;"><!--前置图标-->
                <i class="fa fa-envelope" style="color:red;"></i>
            </td>
            <td style="width: 20%;"><!--仓库和物料变动高亮-->
                <a><b class="text-primary">{{ notice.verb }}</b></a>
                </td>
            <td class="mailbox-subject"  style="width: 50%;"><!--消息主体-->
                    <span style="text-align:right">您收到了来自<b class="text-success">{{ notice.actor }}</b>的【{{ notice.verb }}】的通知
            </td>
            <td class="mailbox-date" style="width: 20%;"><!--通知时间-->
                &nbsp;&nbsp;
                <b> {{ notice.timestamp }}</b>
            </td>
            <!-- 单条带id的请求 -->
            <td style="width: 0px;">
                <a href="{% url 'update_status' %}?notice_id={{ notice.id }}"
                title="已读"><span class="text-success"><i class="fa fa-check"></i></span>
            </a>
            </td>
                <!-- 全部不带id的请求 -->
            <td style="width: 20%;">
                <button type="button" class="btn btn-tool">
                    <a href="{% url 'update_status' %}" class="text-success font-weight-bold">
                    <i class="fa fa-check-square-o"></i>全部已读
                    </a>
                </button>
            </td>

            <br>
            <br>
        </tr>

{% endfor %}
</table>
        <!--跳转已读界面-->
        <br/>
        <div align="center" style="position:relative;top:10px">
            <a href="{% url 'get_read_notifications' %}">
                <button type="button" class="btn btn-primary">查看已读</button>
            </a>
        </div>
</div>
{%endblock%}